{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link,useLocation,useNavigate}from'react-router-dom';import{Form,Button,Row,Col,Table}from'react-bootstrap';import{LinkContainer}from'react-router-bootstrap';import{useDispatch,useSelector}from'react-redux';import Loader from'../components/Loader';import Message from'../components/Message';import{USER_UPDATE_PROFILE_RESET}from'../constants/userConstants';import{getUserDetails,updateUserProfile}from'../actions/userActions';import{listMyOrders}from'../actions/orderActions';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ProfileScreens(){const[name,setName]=useState('');const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[confirmPassword,setConfirmPassword]=useState('');const[message,setMessage]=useState('');const navigate=useNavigate();const dispatch=useDispatch();const userDetails=useSelector(state=>state.userDetails);const{error,loading,user}=userDetails;const userLogin=useSelector(state=>state.userLogin);const{userInfo}=userLogin;const userUpdateProfile=useSelector(state=>state.userUpdateProfile);const{success}=userLogin;const orderListMy=useSelector(state=>state.orderListMy);const{loading:loadingOrders,error:errorOrders,orders}=orderListMy;useEffect(()=>{if(!userInfo){navigate('/login');}else{if(!user||!user.name||success||userInfo._id!==user._id){dispatch({type:USER_UPDATE_PROFILE_RESET});dispatch(getUserDetails('profile'));dispatch(listMyOrders());}else{setName(user.name);setEmail(user.email);}}},[dispatch,navigate,userInfo,user,success]);const submitHandler=e=>{e.preventDefault();if(password!==confirmPassword){setMessage('Password do not match');}else{dispatch(updateUserProfile({'id':user._id,'name':name,'email':email,'password':password}));setMessage('Update Successfully');}};return/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:3,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"User Profile\"}),message&&/*#__PURE__*/_jsx(Message,{variant:\"info\",children:message}),error&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}),loading&&/*#__PURE__*/_jsx(Loader,{}),/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"name\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Name\"}),/*#__PURE__*/_jsx(Form.Control,{required:true,type:\"name\",placeholder:\"Enter Name\",value:name,onChange:e=>setName(e.target.value)})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"email\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email Address \"}),/*#__PURE__*/_jsx(Form.Control,{required:true,type:\"email\",placeholder:\"Enter Email\",value:email,onChange:e=>setEmail(e.target.value)})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"password\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password \"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Enter Password\",value:password,onChange:e=>setPassword(e.target.value)})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"passwordConfirm\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Confirm Password \"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Confirm Password\",value:confirmPassword,onChange:e=>setConfirmPassword(e.target.value)})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"primary\",children:\"UPDATE\"})]})]}),/*#__PURE__*/_jsxs(Col,{md:9,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"My Orders\"}),loadingOrders?/*#__PURE__*/_jsx(Loader,{}):errorOrders?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorOrders}):/*#__PURE__*/_jsxs(Table,{striped:true,responsive:true,className:\"table-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Total\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Paid\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Delivered\"}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:orders.map(order=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:order._id}),/*#__PURE__*/_jsx(\"td\",{children:order.createdAt.substring(0,10)}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",order.totalPrice]}),/*#__PURE__*/_jsx(\"td\",{children:order.isPaid?order.paidAt.substring(0,10):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\",style:{color:'red'}})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(LinkContainer,{to:\"/order/\".concat(order._id),children:/*#__PURE__*/_jsx(Button,{className:\"btn-sm\",children:\"Details\"})})})]},order._id))})]})]})]});}export default ProfileScreens;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}