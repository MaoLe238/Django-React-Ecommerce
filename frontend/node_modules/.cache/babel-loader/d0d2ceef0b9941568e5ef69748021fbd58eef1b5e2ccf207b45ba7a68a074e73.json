{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link,useLocation,useNavigate,useParams}from'react-router-dom';import{Form,Button,Row,Col}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import Loader from'../components/Loader';import Message from'../components/Message';import FormContainer from'../components/FormContainer';import{getUserDetails,updateUser}from'../actions/userActions';import{USER_UPDATE_RESET}from'../constants/userConstants';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function UserEditScreen(){const{userId}=useParams();const[name,setName]=useState('');const[email,setEmail]=useState('');const[isAdmin,setIsAdmin]=useState(false);const navigate=useNavigate();const dispatch=useDispatch();const userDetails=useSelector(state=>state.userDetails);const{error,loading,user}=userDetails;const userUpdate=useSelector(state=>state.userUpdate);const{error:errorUpdate,loading:loadingUpdate,success:successUpdate}=userUpdate;useEffect(()=>{if(successUpdate){dispatch({type:USER_UPDATE_RESET});navigate('/admin/userlist');}else{if(!user.name||user._id!==Number(userId)){dispatch(getUserDetails(userId));}else{setName(user.name);setEmail(user.email);setIsAdmin(user.isAdmin);}}},[dispatch,user,userId,navigate,successUpdate]);const submitHandler=e=>{e.preventDefault();dispatch(updateUser({_id:user._id,name,email,isAdmin}));};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/admin/userlist\",children:\"Go Back\"}),/*#__PURE__*/_jsxs(FormContainer,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Edit User\"}),loadingUpdate&&/*#__PURE__*/_jsx(Loader,{}),errorUpdate&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorUpdate}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"name\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"name\",placeholder:\"Enter Name\",value:name,onChange:e=>setName(e.target.value)})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"email\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email Address \"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",placeholder:\"Enter Email\",value:email,onChange:e=>setEmail(e.target.value)})]}),/*#__PURE__*/_jsx(Form.Group,{controlId:\"isadmin\",children:/*#__PURE__*/_jsx(Form.Check,{type:\"checkbox\",label:\"Is Admin\",checked:isAdmin,onChange:e=>setIsAdmin(e.target.checked)})}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"primary\",children:\"Update\"})]})]})]});}export default UserEditScreen;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}