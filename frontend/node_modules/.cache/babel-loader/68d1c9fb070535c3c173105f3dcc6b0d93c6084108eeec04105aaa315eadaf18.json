{"ast":null,"code":"import React,{useEffect}from'react';import{Link,useParams,useNavigate,useLocation}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import{Row,Col,ListGroup,Image,Form,Button,Card}from'react-bootstrap';import Message from'../components/Message';import{addToCart,removeFromCart}from'../actions/cartActions';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function CartScreen(){const navigate=useNavigate();const location=useLocation();const{id}=useParams();const productId=id;const qty=location.search?Number(location.search.split('=')[1]):1;const dispatch=useDispatch();const cart=useSelector(state=>state.cart);const{cartItems}=cart;console.log('cartItems:',cartItems);useEffect(()=>{if(productId){dispatch(addToCart(productId,qty));}},[dispatch,productId,qty]);const removeFromCartHandler=id=>{dispatch(removeFromCart(id));};const checkoutHandler=()=>{navigate('/shipping');};return/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:8,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Shopping Cart\"}),cartItems.length===0?/*#__PURE__*/_jsxs(Message,{variant:\"info\",children:[\"Your cart is empty \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Go Back\"})]}):/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:cartItems.map(item=>/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Image,{src:item.image,alt:item.name,fluid:true,rounded:true})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.product),children:item.name})}),/*#__PURE__*/_jsxs(Col,{md:2,children:[\"$\",item.price]}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Form.Control,{as:\"select\",value:item.qty,onChange:e=>dispatch(addToCart(item.product,Number(e.target.value))),children:[...Array(item.countInStock).keys()].map(x=>/*#__PURE__*/_jsx(\"option\",{value:x+1,children:x+1},x+1))})}),/*#__PURE__*/_jsx(Col,{md:1,children:/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"light\",onClick:()=>removeFromCartHandler(item.product),children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})})]})},item.product))})]}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Subtottal (\",cartItems.reduce((acc,item)=>acc+item.qty,0),\")\"]}),\"$\",cartItems.reduce((acc,item)=>acc+item.qty*item.price,0).toFixed(2)]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Button,{type:\"button\",className:\"btn-block\",disabled:cartItems.length===0,onClick:checkoutHandler,children:\"Proceed To Checkout\"})})]})})]});}export default CartScreen;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}